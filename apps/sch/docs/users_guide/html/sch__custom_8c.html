<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CFS Scheduler (SCH) Application on  User&#39;s Guide: sch/fsw/src/sch_custom.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_66bf159e40c144e71169039073992ebf.html">sch</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_59f73f396cabe1b60606d7893817518c.html">fsw</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_5db1b34cd30e1ff1f45f16025c27c361.html">src</a>
  </div>
</div>
<div class="contents">
<h1>sch_custom.c File Reference</h1><code>#include &quot;cfe.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="sch__platform__cfg_8h_source.html">sch_platform_cfg.h</a>&quot;</code><br/>
<code>#include &quot;sch_app.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="sch__custom_8h_source.html">sch_custom.h</a>&quot;</code><br/>
<code>#include &quot;cfe_time_msg.h&quot;</code><br/>

<p><a href="sch__custom_8c_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sch__custom_8c.html#a460799de20a37103670e068ec0cd3854">SCH_CustomEarlyInit</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Custom Early Initialization.  <a href="#a460799de20a37103670e068ec0cd3854"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sch__custom_8c.html#a769b51f7ffc7c7711cc7bf0856702a77">SCH_CustomLateInit</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Custom Late Initialization.  <a href="#a769b51f7ffc7c7711cc7bf0856702a77"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sch__custom_8c.html#a0f0feaac769ebba7a790a5575edfa482">SCH_CustomGetCurrentSlotNumber</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Obtains the Current Slot (Minor Frame) number.  <a href="#a0f0feaac769ebba7a790a5575edfa482"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sch__custom_8c.html#a521f028b851995a3755ed7e4294f3b9e">SCH_CustomCleanup</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Custom Cleanup.  <a href="#a521f028b851995a3755ed7e4294f3b9e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sch__custom_8c.html#abbb6d913166c6579b57f48ca542b7ad9">SCH_GetMETSlotNumber</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Computes a minor slot number from a MET subseconds zero point.  <a href="#abbb6d913166c6579b57f48ca542b7ad9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sch__custom_8c.html#a18afe2a56ba0bfdd348e88f0d8a9d55b">SCH_MajorFrameCallback</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Performs Major Frame Synchronization.  <a href="#a18afe2a56ba0bfdd348e88f0d8a9d55b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="sch__custom_8c.html#af2799afed4a19fadc0a75dc7419a93ca">SCH_MinorFrameCallback</a> (uint32 TimerId)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Performs Minor Frame time step.  <a href="#af2799afed4a19fadc0a75dc7419a93ca"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a521f028b851995a3755ed7e4294f3b9e"></a><!-- doxytag: member="sch_custom.c::SCH_CustomCleanup" ref="a521f028b851995a3755ed7e4294f3b9e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCH_CustomCleanup </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Custom Cleanup. </p>
<dl class="user"><dt><b>Description</b></dt><dd>This function is intended to perform any clean up of custom initialization that would be necessary on an application exit</dd></dl>
<dl class="user"><dt><b>Assumptions, External Events, and Notes:</b></dt><dd>Any resources that will not be cleaned up automatically be CFE need to be cleaned up in this function. </dd></dl>

<p>Definition at line <a class="el" href="sch__custom_8c_source.html#l00162">162</a> of file <a class="el" href="sch__custom_8c_source.html">sch_custom.c</a>.</p>

<p>References <a class="el" href="sch__custom_8c_source.html#l00230">SCH_MajorFrameCallback()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>
</p>

</div>
</div>
<a class="anchor" id="a460799de20a37103670e068ec0cd3854"></a><!-- doxytag: member="sch_custom.c::SCH_CustomEarlyInit" ref="a460799de20a37103670e068ec0cd3854" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32 SCH_CustomEarlyInit </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Custom Early Initialization. </p>
<dl class="user"><dt><b>Description</b></dt><dd>This function is intended to perform the creation of the minor frame timer. It is called during SCH_TimerInit It may be updated to include other initializations, or modifications to already set scheduler parameters.</dd></dl>
<dl class="user"><dt><b>Assumptions, External Events, and Notes:</b></dt><dd>SCH_AppData.ClockAccuracy will be set to the clock resolution in microseconds. CFE_SUCCESS will be returned if all creation was performed properly.</dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><table border="0" cellpadding="2" width="100%" cellspacing="3">
<tr>
<td width="20%" valign="TOP"><p>CFE_SUCCESS </p>
</td><td width="80%"><p>  </p>
</td></tr>
<tr>
<td colspan="2" width="100%"><p>Return codes from CFE_PSP_TimerInit  </p>
</td></tr>
</table>
</dd></dl>

<p>Definition at line <a class="el" href="sch__custom_8c_source.html#l00066">66</a> of file <a class="el" href="sch__custom_8c_source.html">sch_custom.c</a>.</p>

<p>References <a class="el" href="sch__custom_8c_source.html#l00349">SCH_MinorFrameCallback()</a>, and <a class="el" href="sch__custom_8h_source.html#l00036">SCH_TIMER_NAME</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>
</p>

</div>
</div>
<a class="anchor" id="a0f0feaac769ebba7a790a5575edfa482"></a><!-- doxytag: member="sch_custom.c::SCH_CustomGetCurrentSlotNumber" ref="a0f0feaac769ebba7a790a5575edfa482" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 SCH_CustomGetCurrentSlotNumber </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Obtains the Current Slot (Minor Frame) number. </p>
<dl class="user"><dt><b>Description</b></dt><dd>This function determines the current slot (minor frame) number. It corrects for any minor frame overlap caused by poor minor frame timing, if necessary. This function and associated subfunction was added to the customizable section as on slower platforms this function can have noticible overhead, and several simplifying assumptions can be made on a platform specific basis.</dd></dl>
<dl class="user"><dt><b>Assumptions, External Events, and Notes:</b></dt><dd>None</dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><table border="0" cellpadding="2" width="100%" cellspacing="3">
<tr>
<td colspan="2" width="100%"><p>Returns slot index from zero to (<a class="el" href="sch__platform__cfg_8h.html#a640d7089f602476608c00d5d9b613315">SCH_TOTAL_SLOTS</a>-1)  </p>
</td></tr>
</table>
</dd></dl>

<p>Definition at line <a class="el" href="sch__custom_8c_source.html#l00123">123</a> of file <a class="el" href="sch__custom_8c_source.html">sch_custom.c</a>.</p>

<p>References <a class="el" href="sch__custom_8c_source.html#l00177">SCH_GetMETSlotNumber()</a>, <a class="el" href="sch__msgdefs_8h_source.html#l00070">SCH_NOT_SYNCHRONIZED</a>, and <a class="el" href="sch__platform__cfg_8h_source.html#l00053">SCH_TOTAL_SLOTS</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>
</p>

</div>
</div>
<a class="anchor" id="a769b51f7ffc7c7711cc7bf0856702a77"></a><!-- doxytag: member="sch_custom.c::SCH_CustomLateInit" ref="a769b51f7ffc7c7711cc7bf0856702a77" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32 SCH_CustomLateInit </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Custom Late Initialization. </p>
<dl class="user"><dt><b>Description</b></dt><dd>This function is intended to perform a wait for startup sync followed by the initialization and starting of the major frame timer, and the starting of the minor frame timer. It may be updated to include other initializations, or modifications to already set scheduler parameters, or remove actions previously performed in <a class="el" href="sch__custom_8c.html#a460799de20a37103670e068ec0cd3854" title="Custom Early Initialization.">SCH_CustomEarlyInit</a> . This function is called following the completion of SCH_AppInit</dd></dl>
<dl class="user"><dt><b>Assumptions, External Events, and Notes:</b></dt><dd>Any startup synchronization is included in this function CFE_SUCCESS will be returned if all initialization was performed properly.</dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><table border="0" cellpadding="2" width="100%" cellspacing="3">
<tr>
<td width="20%" valign="TOP"><p>CFE_SUCCESS </p>
</td><td width="80%"><p>  </p>
</td></tr>
<tr>
<td colspan="2" width="100%"><p>Return codes from CFE_PSP_TimerInit  </p>
</td></tr>
</table>
</dd></dl>

<p>Definition at line <a class="el" href="sch__custom_8c_source.html#l00090">90</a> of file <a class="el" href="sch__custom_8c_source.html">sch_custom.c</a>.</p>

<p>References <a class="el" href="sch__custom_8c_source.html#l00230">SCH_MajorFrameCallback()</a>, <a class="el" href="sch__platform__cfg_8h_source.html#l00199">SCH_STARTUP_PERIOD</a>, and <a class="el" href="sch__platform__cfg_8h_source.html#l00185">SCH_STARTUP_SYNC_TIMEOUT</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>
</p>

</div>
</div>
<a class="anchor" id="abbb6d913166c6579b57f48ca542b7ad9"></a><!-- doxytag: member="sch_custom.c::SCH_GetMETSlotNumber" ref="abbb6d913166c6579b57f48ca542b7ad9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32 SCH_GetMETSlotNumber </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Computes a minor slot number from a MET subseconds zero point. </p>
<dl class="user"><dt><b>Description</b></dt><dd>This function determines the current slot (minor frame) number if one were to assume that slot zero started when the MET microseconds are equal to zero.</dd></dl>
<dl class="user"><dt><b>Assumptions, External Events, and Notes:</b></dt><dd>None</dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><table border="0" cellpadding="2" width="100%" cellspacing="3">
<tr>
<td colspan="2" width="100%"><p>Returns slot index from zero to (<a class="el" href="sch__platform__cfg_8h.html#a640d7089f602476608c00d5d9b613315">SCH_TOTAL_SLOTS</a>-1)  </p>
</td></tr>
</table>
</dd></dl>

<p>Definition at line <a class="el" href="sch__custom_8c_source.html#l00177">177</a> of file <a class="el" href="sch__custom_8c_source.html">sch_custom.c</a>.</p>

<p>References <a class="el" href="sch__platform__cfg_8h_source.html#l00053">SCH_TOTAL_SLOTS</a>.</p>

<p>Referenced by <a class="el" href="sch__custom_8c_source.html#l00123">SCH_CustomGetCurrentSlotNumber()</a>, <a class="el" href="sch__custom_8c_source.html#l00230">SCH_MajorFrameCallback()</a>, and <a class="el" href="sch__custom_8c_source.html#l00349">SCH_MinorFrameCallback()</a>.</p>

</div>
</div>
<a class="anchor" id="a18afe2a56ba0bfdd348e88f0d8a9d55b"></a><!-- doxytag: member="sch_custom.c::SCH_MajorFrameCallback" ref="a18afe2a56ba0bfdd348e88f0d8a9d55b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCH_MajorFrameCallback </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Performs Major Frame Synchronization. </p>
<dl class="user"><dt><b>Description</b></dt><dd>This function is called by cFE TIME services when a Major Frame synchronization signal is received. It then synchronizes the minor frame (slot) processing of the Schedule Definition Table.</dd></dl>
<dl class="user"><dt><b>Assumptions, External Events, and Notes:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="sch__custom_8c_source.html#l00230">230</a> of file <a class="el" href="sch__custom_8c_source.html">sch_custom.c</a>.</p>

<p>References <a class="el" href="sch__custom_8c_source.html#l00177">SCH_GetMETSlotNumber()</a>, <a class="el" href="sch__msgdefs_8h_source.html#l00082">SCH_MAJOR_FS_CFE_TIME</a>, <a class="el" href="sch__platform__cfg_8h_source.html#l00218">SCH_MAX_NOISY_MAJORF</a>, <a class="el" href="sch__msgdefs_8h_source.html#l00071">SCH_MINOR_SYNCHRONIZED</a>, <a class="el" href="sch__msgdefs_8h_source.html#l00070">SCH_NOT_SYNCHRONIZED</a>, and <a class="el" href="sch__platform__cfg_8h_source.html#l00053">SCH_TOTAL_SLOTS</a>.</p>

<p>Referenced by <a class="el" href="sch__custom_8c_source.html#l00162">SCH_CustomCleanup()</a>, and <a class="el" href="sch__custom_8c_source.html#l00090">SCH_CustomLateInit()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>
</p>

</div>
</div>
<a class="anchor" id="af2799afed4a19fadc0a75dc7419a93ca"></a><!-- doxytag: member="sch_custom.c::SCH_MinorFrameCallback" ref="af2799afed4a19fadc0a75dc7419a93ca" args="(uint32 TimerId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SCH_MinorFrameCallback </td>
          <td>(</td>
          <td class="paramtype">uint32&nbsp;</td>
          <td class="paramname"> <em>TimerId</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Performs Minor Frame time step. </p>
<dl class="user"><dt><b>Description</b></dt><dd>This function is called by an OSAL timer when the minor frame timing reference sends a signal. The Scheduler Application uses this to drive the Application's processing of each minor frame.</dd></dl>
<dl class="user"><dt><b>Assumptions, External Events, and Notes:</b></dt><dd>None </dd></dl>

<p>Definition at line <a class="el" href="sch__custom_8c_source.html#l00349">349</a> of file <a class="el" href="sch__custom_8c_source.html">sch_custom.c</a>.</p>

<p>References <a class="el" href="sch__custom_8c_source.html#l00177">SCH_GetMETSlotNumber()</a>, <a class="el" href="sch__msgdefs_8h_source.html#l00083">SCH_MAJOR_FS_MINOR_FRAME_TIMER</a>, <a class="el" href="sch__msgdefs_8h_source.html#l00081">SCH_MAJOR_FS_NONE</a>, <a class="el" href="sch__msgdefs_8h_source.html#l00073">SCH_MAJOR_SYNCHRONIZED</a>, <a class="el" href="sch__msgdefs_8h_source.html#l00072">SCH_PENDING_MAJOR_SYNCH</a>, and <a class="el" href="sch__platform__cfg_8h_source.html#l00053">SCH_TOTAL_SLOTS</a>.</p>

<p>Referenced by <a class="el" href="sch__custom_8c_source.html#l00066">SCH_CustomEarlyInit()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
</div>
</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Jul 2017 for CFS Scheduler (SCH) Application on  User's Guide by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
