<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CFS Scheduler (SCH) Application on  User&#39;s Guide: CFS Scheduler Deployment Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">index</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="cfsschdg">CFS Scheduler Deployment Guide </a></h1><p>In order to successfully integrate the Scheduler Application into a system, the cFE must first be configured to allow for the following: <br/>
</p>
<ul>
<li>
The  CFE Software Bus must be configured to have sufficient Pipe resources to allocate one pipe to SCH (see CFE_SB_MAX_PIPES) with a pipe depth as specified by <a class="el" href="sch__platform__cfg_8h.html#a0efb7feeef71f7d97bbca9bae5dd7c36" title="SCH Command Pipe Depth.">SCH_PIPE_DEPTH</a> <br/>
 </li>
<li>
The  CFE Table Services must be configured to allow SCH to have two single buffered tables (see CFE_TBL_MAX_NUM_TABLES) <br/>
 </li>
<li>
The  CFE Table Services must be configured to allow for Single Buffered Tables as large as the largest of the SCH Schedule Definition Table and the Message Definition Table. The Schedule Definition Table's size can be determined with the following equation: <br/>
<br/>
 SDT Size (in bytes) = <a class="el" href="sch__platform__cfg_8h.html#a640d7089f602476608c00d5d9b613315">SCH_TOTAL_SLOTS</a> * <a class="el" href="sch__platform__cfg_8h.html#a191125a78975e2a0c581969c7d678b4e">SCH_ENTRIES_PER_SLOT</a> * 12 (sizeof one SDT record)<br/>
<br/>
 The size of the Message Definition Table can be determined with the following equation:<br/>
<br/>
 MDT Size (in bytes) = <a class="el" href="sch__platform__cfg_8h.html#abae40b96462eac577fb95363ee030a38">SCH_MAX_MSG_WORDS</a> * <a class="el" href="sch__platform__cfg_8h.html#a02550ee5880be5061544001811deecec">SCH_MAX_MESSAGES</a> <br/>
<br/>
 </li>
<li>
The <a class="el" href="sch__msgids_8h.html#a6b68abc81890d0891f1562df904fca7d">SCH Housekeeping Request Message </a> needs to be put into the SCH Schedule Definition Table and the SCH Message Definition Table in order to notify SCH when the SCH Housekeeping message should be generated <br/>
 </li>
<li>
The default SCH Schedule Definition Table (location specified by the <a class="el" href="sch__platform__cfg_8h.html#aa0a00e5974aa67bfe91ce39d1f2db1d3">SCH_SCHEDULE_FILENAME</a> configuration parameter) must be available before the SCH is started <br/>
 </li>
<li>
The default SCH Message Definition Table (location specified by the <a class="el" href="sch__platform__cfg_8h.html#a052acaa8ebd6c01b4fcc35636ea3b265">SCH_MESSAGE_FILENAME</a> configuration parameter) must be available before the SCH is started <br/>
 </li>
</ul>
<h3>Scheduler Timing Customization</h3>
<p>The Scheduler application contains the file <code><a class="el" href="sch__custom_8c.html">sch_custom.c</a></code> which can be adapted to take advantage of platform specific functionality concerning Major Frame timing, Minor Frame timing, and current slot determiniation. While no changes are required to this file for SCH to be functional, it may be possible to obtain better accuracy or increase processing efficiency by modifying the contents. <br/>
</p>
<p>This customizable section of code includes four required functions for interface purposes: </p>
<ul>
<li>
<a class="el" href="sch__custom_8c.html#a460799de20a37103670e068ec0cd3854" title="Custom Early Initialization.">SCH_CustomEarlyInit</a> </li>
<li>
<a class="el" href="sch__custom_8c.html#a769b51f7ffc7c7711cc7bf0856702a77" title="Custom Late Initialization.">SCH_CustomLateInit</a> </li>
<li>
<a class="el" href="sch__custom_8c.html#a0f0feaac769ebba7a790a5575edfa482" title="Obtains the Current Slot (Minor Frame) number.">SCH_CustomGetCurrentSlotNumber</a> </li>
<li>
<a class="el" href="sch__custom_8c.html#a521f028b851995a3755ed7e4294f3b9e" title="Custom Cleanup.">SCH_CustomCleanup</a> </li>
</ul>
<p>It also contains two important local functions that act as interrupt handlers: </p>
<ul>
<li>
<a class="el" href="sch__custom_8c.html#a18afe2a56ba0bfdd348e88f0d8a9d55b" title="Performs Major Frame Synchronization.">SCH_MajorFrameCallback</a> </li>
<li>
<a class="el" href="sch__custom_8c.html#af2799afed4a19fadc0a75dc7419a93ca" title="Performs Minor Frame time step.">SCH_MinorFrameCallback</a> </li>
</ul>
<p>These Callback functions should not require significant modification if just changing the timing source. It is very important to note, however, that SCH_MinorFrameCallback currently assumes that it is using a timing function similar to OS_TimerSet that allows both a first and a subsequent repeated time setting. If a time setting function that only allows a single time to be set is used, a further case must be added that will allow the SCH_SHORT_SLOT_PERIOD to be set back to SCH_NORMAL_SLOT_PERIOD on the next minor frame call if the major frame is no longer being used. <br/>
</p>
<h3>Stopping/Starting Scheduler During Critical Activities</h3>
<p>The Scheduler application has an associated Scheduler Library that can be used to enable and disable schedule processing if <a class="el" href="sch__platform__cfg_8h.html#a3e60196dcee964e40ea2fa02432ce9f1">SCH_LIB_PRESENCE</a> is set to 1 (if it is set to 0, the library is not used, and does not even need to exist). The library consists of three APIs: </p>
<ul>
<li>
SCH_EnableProcessing </li>
<li>
SCH_DisableProcessing </li>
<li>
SCH_GetProcessingState </li>
</ul>
<p>SCH_EnableProcessing must be called as many times as SCH_DisableProcessing has previously been called to re-enable processing. Note that while processing is disabled, SCH will not respond to ground commands.</p>
<p>Next: <a class="el" href="cfsschcmds.html">CFS Scheduler Commands</a> <br/>
 Prev: <a class="el" href="cfsschreq.html">CFS Scheduler Requirements</a> </p>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Jul 2017 for CFS Scheduler (SCH) Application on  User's Guide by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
